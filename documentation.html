<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="v0.8.4-SNAPSHOT">
<title>GeoWave Documentation</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#222;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#222;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight: 300;font-style:normal;color:#222;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#222;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color: #222;margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#222;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#222;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#222;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>GeoWave Documentation</h1>
<div class="details">
<span id="author" class="author">v0.8.4-SNAPSHOT</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#links">Links</a>
<ul class="sectlevel2">
<li><a href="#span-class-icon-i-class-fa-fa-home-i-span-a-href-http-ngageoint-github-io-geowave-site-a"><span class="icon"><i class="fa fa-home"></i></span> <a href="http://ngageoint.github.io/geowave/">Site</a></a></li>
<li><a href="#span-class-icon-i-class-fa-fa-file-code-o-i-span-a-href-http-ngageoint-github-io-geowave-apidocs-index-html-javadoc-a"><span class="icon"><i class="fa fa-file-code-o"></i></span> <a href="http://ngageoint.github.io/geowave/apidocs/index.html">Javadoc</a></a></li>
<li><a href="#span-class-icon-i-class-fa-fa-github-i-span-a-href-https-github-com-ngageoint-geowave-github-a"><span class="icon"><i class="fa fa-github"></i></span> <a href="https://github.com/ngageoint/geowave">GitHub</a></a></li>
<li><a href="#span-class-icon-i-class-fa-fa-file-archive-o-i-span-a-href-http-ngageoint-github-io-geowave-packages-html-rpms-a"><span class="icon"><i class="fa fa-file-archive-o"></i></span> <a href="http://ngageoint.github.io/geowave/packages.html">RPMs</a></a></li>
</ul>
</li>
<li><a href="#what-is-geowave">What is GeoWave</a>
<ul class="sectlevel2">
<li><a href="#origin">Origin</a></li>
<li><a href="#pull-requests">Pull Requests</a></li>
<li><a href="#intent">Intent</a></li>
</ul>
</li>
<li><a href="#theory">Theory</a>
<ul class="sectlevel2">
<li><a href="#spatial-index">Spatial Index</a></li>
<li><a href="#theorydecomposition">Decomposition</a></li>
</ul>
</li>
<li><a href="#screenshots-2">Screenshots</a>
<ul class="sectlevel2">
<li><a href="#geolife">GeoLife</a></li>
<li><a href="#openstreetmap-gpx-tracks">OpenStreetMap GPX Tracks</a></li>
<li><a href="#t-drive">T-Drive</a></li>
</ul>
</li>
<li><a href="#architecture">Architecture</a>
<ul class="sectlevel2">
<li><a href="#overview">Overview</a></li>
<li><a href="#architecture-indexes">Indexes</a></li>
<li><a href="#architecture-adapters">Adapters</a></li>
<li><a href="#architecture-accumulo">Accumulo Key Structure</a></li>
<li><a href="#statistics">Statistics</a></li>
</ul>
</li>
<li><a href="#ingest">Ingest</a>
<ul class="sectlevel2">
<li><a href="#overview-2">Overview</a></li>
<li><a href="#ingest-framework">Framework</a></li>
<li><a href="#cmd-geowave-ingest">Cmd: geowave-ingest</a></li>
<li><a href="#operation-clear">Operation: -clear</a></li>
<li><a href="#operation-hdfsingest">Operation: -hdfsingest</a></li>
<li><a href="#operation-hdfsstage">Operation: -hdfsstage</a></li>
<li><a href="#operation-localingest">Operation: -localingest</a></li>
<li><a href="#operation-poststage">Operation: -poststage</a></li>
<li><a href="#ingest-standalone">Standalone</a></li>
<li><a href="#ingest-plugins">Ingest plugins</a></li>
</ul>
</li>
<li><a href="#query">Query</a>
<ul class="sectlevel2">
<li><a href="#overview-3">Overview</a></li>
</ul>
</li>
<li><a href="#third-party">Third Party</a>
<ul class="sectlevel2">
<li><a href="#geoserver">GeoServer</a></li>
</ul>
</li>
<li><a href="#installation-from-rpm">Installation from RPM</a>
<ul class="sectlevel2">
<li><a href="#overview-4">Overview</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
</li>
<li><a href="#installation-from-source">Installation from Source</a>
<ul class="sectlevel2">
<li><a href="#geoserver-2">GeoServer</a></li>
<li><a href="#accumulo">Accumulo</a></li>
</ul>
</li>
<li><a href="#accumulo-configuration">Accumulo Configuration</a>
<ul class="sectlevel2">
<li><a href="#overview-5">Overview</a></li>
<li><a href="#versioning">Versioning</a></li>
</ul>
</li>
<li><a href="#building-2">Building</a>
<ul class="sectlevel2">
<li><a href="#application-dependencies">Application Dependencies</a></li>
<li><a href="#maven-dependencies">Maven dependencies</a></li>
<li><a href="#build-process">Build Process</a></li>
<li><a href="#avro">Avro</a></li>
</ul>
</li>
<li><a href="#pdal">PDAL</a>
<ul class="sectlevel2">
<li><a href="#geowave-plugin-setup">GeoWave Plugin Setup</a></li>
<li><a href="#manual-setup">Manual Setup</a></li>
</ul>
</li>
<li><a href="#documentation-2">Documentation</a>
<ul class="sectlevel2">
<li><a href="#overview-6">Overview</a></li>
<li><a href="#ordering">Ordering</a></li>
<li><a href="#preview">Preview</a></li>
<li><a href="#transformation">Transformation</a></li>
<li><a href="#site">Site</a></li>
</ul>
</li>
<li><a href="#puppet-2">Puppet</a>
<ul class="sectlevel2">
<li><a href="#overview-7">Overview</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#examples-2">Examples</a></li>
<li><a href="#clustered">Clustered</a></li>
<li><a href="#puppet-script-management">Puppet script management</a></li>
</ul>
</li>
<li><a href="#appendices-2">Appendices</a>
<ul class="sectlevel2">
<li><a href="#version">Version</a></li>
<li><a href="#topics-in-need-of-documentation">Topics in need of documentation</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="links"><a class="anchor" href="#links"></a>Links</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="span-class-icon-i-class-fa-fa-home-i-span-a-href-http-ngageoint-github-io-geowave-site-a"><a class="anchor" href="#span-class-icon-i-class-fa-fa-home-i-span-a-href-http-ngageoint-github-io-geowave-site-a"></a><span class="icon"><i class="fa fa-home"></i></span> <a href="http://ngageoint.github.io/geowave/">Site</a></h3>

</div>
<div class="sect2">
<h3 id="span-class-icon-i-class-fa-fa-file-code-o-i-span-a-href-http-ngageoint-github-io-geowave-apidocs-index-html-javadoc-a"><a class="anchor" href="#span-class-icon-i-class-fa-fa-file-code-o-i-span-a-href-http-ngageoint-github-io-geowave-apidocs-index-html-javadoc-a"></a><span class="icon"><i class="fa fa-file-code-o"></i></span> <a href="http://ngageoint.github.io/geowave/apidocs/index.html">Javadoc</a></h3>

</div>
<div class="sect2">
<h3 id="span-class-icon-i-class-fa-fa-github-i-span-a-href-https-github-com-ngageoint-geowave-github-a"><a class="anchor" href="#span-class-icon-i-class-fa-fa-github-i-span-a-href-https-github-com-ngageoint-geowave-github-a"></a><span class="icon"><i class="fa fa-github"></i></span> <a href="https://github.com/ngageoint/geowave">GitHub</a></h3>

</div>
<div class="sect2">
<h3 id="span-class-icon-i-class-fa-fa-file-archive-o-i-span-a-href-http-ngageoint-github-io-geowave-packages-html-rpms-a"><a class="anchor" href="#span-class-icon-i-class-fa-fa-file-archive-o-i-span-a-href-http-ngageoint-github-io-geowave-packages-html-rpms-a"></a><span class="icon"><i class="fa fa-file-archive-o"></i></span> <a href="http://ngageoint.github.io/geowave/packages.html">RPMs</a></h3>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-geowave"><a class="anchor" href="#what-is-geowave"></a>What is GeoWave</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GeoWave is a library for storage, index, and search of multi-dimensional data on top of a sorted key-value datastore.
GeoWave includes specific tailored implementations that have advanced support for OGC spatial types (up to 3 dimensions),
and both bounded and unbounded temporal values. Both single and ranged values are supported on all axes. GeoWave’s
geospatial support is built on top of the GeoTools extensibility model, so it plugins natively to GeoServer, uDig, and
any other GeoTools compatible project – and can ingest GeoTools compatible data sources. GeoWave comes out of the box
with an Accumulo implementation.</p>
</div>
<div class="paragraph">
<p>Features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds multi-dimensional indexing capability to <a href="http://projects.apache.org/projects/accumulo.html" target="_blank">Apache Accumulo</a></p>
</li>
<li>
<p>Adds support for geographic objects and geospatial operators to <a href="http://projects.apache.org/projects/accumulo.html" target="_blank">Apache Accumulo</a></p>
</li>
<li>
<p>Contains a <a href="http://geoserver.org/" target="_blank">GeoServer</a> plugin to allow geospatial data in Accumulo to be shared and visualized via OGC standard services</p>
</li>
<li>
<p>Provides Map-Reduce input and output formats for distributed processing and analysis of geospatial data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>GeoWave attempts to do for Accumulo as PostGIS does for PostgreSQL.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="origin"><a class="anchor" href="#origin"></a>Origin</h3>
<div class="paragraph">
<p>GeoWave was developed at the National Geospatial-Intelligence Agency (NGA) in collaboration with
<a href="http://www.radiantblue.com/">RadiantBlue Technologies</a> and <a href="http://www.boozallen.com/" target="_blank">Booz Allen Hamilton</a>. The government
has <a href="https://github.com/ngageoint/geowave/blob/master/NOTICE" target="_blank">unlimited rights</a> and is releasing this software to
increase the impact of government investments by providing developers with the opportunity to take things in new directions.
The software use, modification, and distribution rights are stipulated within the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0</a> license.</p>
</div>
</div>
<div class="sect2">
<h3 id="pull-requests"><a class="anchor" href="#pull-requests"></a>Pull Requests</h3>
<div class="paragraph">
<p>All pull request contributions to this project will be released under the Apache 2.0 license.</p>
</div>
<div class="paragraph">
<p>Software source code previously released under an open source license and then modified by NGA staff is considered a
"joint work" (see <em>17 USC 101</em>); it is partially copyrighted, partially public domain, and as a whole is protected by
the copyrights of the non-government authors and must be released according to the terms of the original open source license.</p>
</div>
</div>
<div class="sect2">
<h3 id="intent"><a class="anchor" href="#intent"></a>Intent</h3>
<div class="sect3">
<h4 id="pluggable-backend"><a class="anchor" href="#pluggable-backend"></a>Pluggable Backend</h4>
<div class="paragraph">
<p>GeoWave is intended to be a multidimensional indexing layer that can be added on top of any sorted key-value store.
Accumulo was chosen as the target architecture – but HBase would be a relatively straightforward swap – and any
datastore which allows prefix based range scans should be trivial extensions.</p>
</div>
</div>
<div class="sect3">
<h4 id="modular-design"><a class="anchor" href="#modular-design"></a>Modular Design</h4>
<div class="paragraph">
<p>The architecture itself is designed to be extremely extensible – with most of the functionality units defined by
interfaces, with default implementations of these interfaces to cover most use cases. It is expected that the out of the
box functionality should satisfy 90% of use cases – at least that is the intent – but the modular architecture allows
for easy feature extension as well as integration into other platforms.</p>
</div>
</div>
<div class="sect3">
<h4 id="self-describing-data"><a class="anchor" href="#self-describing-data"></a>Self-Describing Data</h4>
<div class="paragraph">
<p>GeoWave also targets keeping data configuration, format, and other information needed to manipulate data in the database
itself. This allows software to programmatically interrogate all the data stored in a single or set of GeoWave instances
without needing bits of configuration from clients, application servers, or other external stores.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="theory"><a class="anchor" href="#theory"></a>Theory</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="spatial-index"><a class="anchor" href="#spatial-index"></a>Spatial Index</h3>
<div class="paragraph">
<p>The core of the issue is that we need to represent multi-dimensional data (could be (latitude, longitude),
(latitude, longitude, time), (latitude, longitude, altitude, time) – or even (feature vector1, feature vector 2 (…)
feature vector n)) in a manner that can be reduced to a series of ranges on a 1 dimensional number line. This is due
to the way Accumulo (and any big table based database really) stores the data – as a sorted set of key/value pairs.</p>
</div>
<div class="paragraph">
<p>What we want is a property that ensures values close in n-dimensional space are still close in 1-dimensional space.
There are a few reasons for this – but primarily it’s so we can represent a n-dimensional range selector(bbox typically
– but can be abstracted to a hyper-rectangle) as a smaller number of highly contiguous 1d ranges.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/sfc1.png" alt="Z-Curve: 2D -&gt; 1D">
</div>
</div>
<div class="paragraph">
<p><em>Figure: Z-Order curve based dimensional decomposition</em></p>
</div>
<div class="paragraph">
<p>Fortunately there is already a type of transform that describes this operation in mathematics – it’s called a “Space
Filling Curve” – or SFC for short. Different space filling curves have different properties - what they all do is take
a n-dimensional space and describe a set of steps to trace all points in a single sequence.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/curves.png" alt="Various space filling curves">
</div>
</div>
<div class="paragraph">
<p><em>Figure: Haverkort, Walderveen Locality and Bounding-Box Quality of Two-Dimensional Space-Filling Curves 2008 arXiv:0806.4787v2</em></p>
</div>
<div class="paragraph">
<p>The trade-offs for the various curves are outside the scope of this user manual, but the paper cited for figure two is
an excellent starting point to start learning about these curves.</p>
</div>
<div class="paragraph">
<p>For the purposes of GeoWave we have implemented two space fillings curves:</p>
</div>
<div class="sect3">
<h4 id="z-order-sfc"><a class="anchor" href="#z-order-sfc"></a>Z-Order SFC</h4>
<div class="paragraph">
<p>This is also commonly called a GeoHash, or Morton order (and sometimes incorrectly called a Peano curve). This is the
most popular SFC used for multi-dimensional &#8594; 1-dimensional mappings – primarily because it is both intuitive and very
easy to implement in code. There are two common ways to implement this – ideally a bit-interleaving is used (that is
what gives rise to the diagram in figure 2) – imagine we had two numbers, A and B. Let the binary representation of
those numbers be A1A2A3 and B1B2B3. The “bit interleaved” version would be A1B1A2B2A3B3. Since we are working with
binary numbers this gives a “unit cell” of 2x2. If we added dimensions just image the same interleaving, but another
term - C1C2C3, etc. + This is sometimes implemented in base 10 instead of base 2. This implementation reduces somewhat
the locality (“packing property” – or the measure of how close numbers in n-dimensional space are to numbers in 1-dimensional
space). As you might expect a two dimensional version of this gives a unit cell of 10x10 (for two dimensions) – hence the
worse packing.</p>
</div>
<div class="sect4">
<h5 id="hilbert-sfc"><a class="anchor" href="#hilbert-sfc"></a>Hilbert SFC</h5>
<div class="paragraph">
<p>The Hilbert curve is a bit more complex to work with than the Z-curve – both when calculating and when performing a
decomposition – hence it is less commonly used. Nevertheless it is popular in other areas in computer science where
multiple variables need to be set in a linear order – process scheduling for one. A simplistic view of a standard
projections of the earth mapped to a Hilbert curve would look something like this – with 4 bits of cardinality per
dimension (how many buckets we have)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/hilbert1.png" alt="Hilbert SFC">
</div>
</div>
<div class="paragraph">
<p><em>Figure: Hilbert space filling curve superimposed over a projection of the earth</em></p>
</div>
<div class="paragraph">
<p>Note that there are the cardinality (number of buckets per dimensions) has an impact on the resolution of our Hilbert
index. Here we map from -180 to +180 over 16 buckets – so we have resolution of no better than 360/16, or 22.5 degrees
for longitude (and incidentally 11.25 degrees for latitude). This doesn’t mean we can’t represent values more precisely
than this – it just means our initial (coarse) index – based on SFC ranges – can’t provide resolution any better than
this. Adding more bits per dimensions will increase the precision of the SFC based index.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="theorydecomposition"><a class="anchor" href="#theorydecomposition"></a>Decomposition</h3>
<div class="paragraph">
<p>Core to the concept of SFC based indexing is range decomposition. This is when we take a range described in multiple
dimensions and turn it into a series of 1d ranges.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/hilbertdecomp1.png" alt="Hilbert Decomposition 1">
</div>
</div>
<div class="paragraph">
<p><em>Figure: Hilbert Ranges</em></p>
</div>
<div class="paragraph">
<p>In the figure above we show that we mean by this. The bounding box described by the blue selection window – or
(2,9) &#8594; (5,13) will “fully” decompose to 3 ranges – 70-75, 92&#8594;99, and 116&#8594;121.</p>
</div>
<div class="paragraph">
<p>It should be noted that sometimes more simplistic algorithms will not fully decompose – but would instead represent
this as 70-121, or even 64&#8594;127 (the smallest “unit cell” this box fits in). As you can see this would result in
scanning many extraneous cells.</p>
</div>
<div class="paragraph">
<p>At some point – with high precision high dimensionality curves – the number of possible unit cells can become to large
too deal with – in this case GeoWaves optimizes this by treating the curve as a “lower cardinality” curve than it
actually is – so the unit cell size might not be 1, but instead 64, 128, 1024, etc. This allows the user to still
achieve high precision when selection windows are small, but not spend an inordinate amount of time fully decomposing
for large selection windows.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/hilbertdecomp2.png" alt="Hilbert Decomposition">
</div>
</div>
<div class="sect3">
<h4 id="consider-a-region-query-asking-for-all-data-from"><a class="anchor" href="#consider-a-region-query-asking-for-all-data-from"></a>Consider a region query asking for all data from:</h4>
<div class="listingblock">
<div class="content">
<pre> (1,1) -&gt; (5,4)</pre>
</div>
</div>
<div class="paragraph">
<p>This query range is shown at left by a blue bounding box.</p>
</div>
</div>
<div class="sect3">
<h4 id="what-did-we-do-here"><a class="anchor" href="#what-did-we-do-here"></a>What did we do here?</h4>
<div class="ulist">
<ul>
<li>
<p>We broke down the initial region into 4 subregions – Red boxes.</p>
</li>
<li>
<p>We broke down each subregion (red box) into 4 sub-sub regions (purple boxes)</p>
</li>
<li>
<p>We then broke down each of those purple boxes into green boxes.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Once we had a decomposed quad which is full contained by the bounding
box we stopped decomposing.</p>
</li>
<li>
<p>We didn’t bother decomposing regions which didn’t overlap the original
search criteria.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/hilbertdecomp3.png" alt="Hilbert Decomposition">
</div>
</div>
<div class="paragraph">
<p>Here we see the query range fully decomposed into the underlying "quads". Note that in some instances we were able to
stop decomposing when the query window fully contained the quad (segment 3 and segment 8)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/hilbertdecomp4.png" alt="Hilbert Decomposition">
</div>
</div>
<div class="paragraph">
<p>Now we have fully transitioned to the 1d number line from the previous set of quads. We have also rolled together
regions which are contiguous.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="screenshots-2"><a class="anchor" href="#screenshots-2"></a>Screenshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The screenshots below are of data loaded from the various attributed data sets into a Geowave instance, processed
(in some cases) by a Geowave analytic process, and rendered by Geoserver.</p>
</div>
<div class="sect2">
<h3 id="geolife"><a class="anchor" href="#geolife"></a>GeoLife</h3>
<div class="paragraph">
<p>Microsoft research has made available a trajectory data set that contains the GPS coordinates of 182 users over a three
year period (April 2007 to August 2012). There are 17,621 trajectories in this data set.</p>
</div>
<div class="paragraph">
<p>More information on this data set is available at <a href="http://research.microsoft.com/jump/131675" target="_blank">Microsoft Research GeoLife page</a></p>
</div>
<div class="sect3">
<h4 id="geolife-at-city-scale"><a class="anchor" href="#geolife-at-city-scale"></a>GeoLife at city scale</h4>
<div class="paragraph">
<p>Below are renderings of GeoLife data. They display both the raw points, as well as the results of a GeoWave kernel
density analytic. The data corresponds to Mapbox zoom level 13.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/geolife-density-13.jpg"><img src="./images/geolife-density-13-thumb.jpg" alt="Geolife density at city scale"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/geolife-points-13.jpg"><img src="./images/geolife-points-13-thumb.jpg" alt="Geolife points at city scale"></a>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="geolife-at-house-scale"><a class="anchor" href="#geolife-at-house-scale"></a>GeoLife at house scale</h4>
<div class="paragraph">
<p>This data set corresponds to a Mapbox zoom level of 15</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/geolife-density-17.jpg"><img src="./images/geolife-density-17-thumb.jpg" alt="GeoLife at house scale"></a>
</div>
</div>
<div class="paragraph">
<p><em>Graphic background &#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/geolife-points-17.jpg"><img src="./images/geolife-points-17-thumb.jpg" alt="GeoLife at house scale"></a>
</div>
</div>
<div class="paragraph">
<p><em>Graphic background &#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="openstreetmap-gpx-tracks"><a class="anchor" href="#openstreetmap-gpx-tracks"></a>OpenStreetMap GPX Tracks</h3>
<div class="paragraph">
<p>The OpenStreetMap Foundation has released a large set of user contributed GPS tracks.  These are about 8 years of
historical tracks. The data set consists of just under 3 billion (not trillion as some websites claim) point, or
just under one million trajectories.</p>
</div>
<div class="paragraph">
<p>More information on this data set is available at <a href="http://wiki.openstreetmap.org/wiki/Planet.gpx" target="_blank">GPX Planet page</a></p>
</div>
<div class="sect3">
<h4 id="osm-gpx-at-continent-scale"><a class="anchor" href="#osm-gpx-at-continent-scale"></a>OSM GPX at continent scale</h4>
<div class="paragraph">
<p>The data below corresponds to a Mapbox zoom level of 6</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/osmgpx.jpg"><img src="./images/osmgpx-thumb.jpg" alt="OSM GPX at continent scale"></a>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="osm-gpx-at-world-scale"><a class="anchor" href="#osm-gpx-at-world-scale"></a>OSM GPX at world scale</h4>
<div class="paragraph">
<p>This data set corresponds to a Mapbox zoom level of 3</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/osmgpx-world.jpg"><img src="./images/osmgpx-world-thumb.jpg" alt="Geolife points at city scale"></a>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="t-drive"><a class="anchor" href="#t-drive"></a>T-Drive</h3>
<div class="paragraph">
<p>Microsoft research has made available a trajectory data set that contains the GPS coordinates of 10,357 taxis in
Beijing, China and surrounding areas over  a one week period. There are approximately 15 million points in this data set.</p>
</div>
<div class="paragraph">
<p>More information on this data set is available at: <a href="http://research.microsoft.com/apps/pubs/?id=152883" target="_blank">Microsoft Research T-drive page</a></p>
</div>
<div class="sect3">
<h4 id="t-drive-at-city-scale"><a class="anchor" href="#t-drive-at-city-scale"></a>T-drive at city scale</h4>
<div class="paragraph">
<p>Below are renderings of the t-drive data. They display both the raw points, as well as the results of a Geowave kernel
density analytic. The data corresponds to Mapbox zoom level 12.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/t-drive-points-12.jpg"><img src="./images/t-drive-points-12-thumb.jpg" alt="T-drive points at city scale"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/t-drive-density-12.jpg"><img src="./images/t-drive-density-12-thumb.jpg" alt="T-drive density at city scale"></a>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="t-drive-at-block-scale"><a class="anchor" href="#t-drive-at-block-scale"></a>T-drive at block scale</h4>
<div class="paragraph">
<p>This data set corresponds to a Mapbox zoom level of 15</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/t-drive-points-2.jpg" alt="T-drive points at block scale">
</div>
</div>
<div class="paragraph">
<p><em>Graphic background&#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/t-drive-density-2.jpg" alt="T-drive density at block scale">
</div>
</div>
<div class="paragraph">
<p><em>Graphic background&#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="t-drive-at-house-scale"><a class="anchor" href="#t-drive-at-house-scale"></a>T-drive at house scale</h4>
<div class="paragraph">
<p>This data set corresponds to a Mapbox zoom level of 17</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/t-drive-points-3.jpg" alt="T-drive points at building scale">
</div>
</div>
<div class="paragraph">
<p><em>Graphic background&#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/t-drive-density-3.jpg" alt="T-drive density at building scale">
</div>
</div>
<div class="paragraph">
<p><em>Graphic background&#169;MapBox and &#169;OpenStreetMap</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>Overview</h3>
<div class="imageblock">
<div class="content">
<img src="./images/overview1.png" alt="Architecture Overview">
</div>
</div>
<div class="paragraph">
<p>At the core of the GeoWave architecture concept is getting data in, and pulling data out – or Ingest and Query. There
are also two types of data persisted in the system – feature data, and metadata. Feature data is the actual set of
attributes and geometries that are stored for later retrieval. Metadata describes how the data is persisted in the
database. The intent is to store the information needed for data discovery and retrieval in the database – so an
existing data store isn’t tied to a bit of configuration on a particular external server or client – but instead is
“self-describing.”</p>
</div>
</div>
<div class="sect2">
<h3 id="architecture-indexes"><a class="anchor" href="#architecture-indexes"></a>Indexes</h3>
<div class="paragraph">
<p>The core engine to quickly retrieve data from GeoWave is a SFC (space filling curve) based index. This index can be
configured with several different parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>number of levels</p>
</li>
<li>
<p>number of dimensions</p>
</li>
<li>
<p>cardinality of each dimension</p>
</li>
<li>
<p>dimension type (bounded / unbounded)</p>
</li>
<li>
<p>value range of each dimension</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More on each of these properties will be described later; this list here is just to give the reader a notion of what
type of configuration information is persisted.</p>
</div>
<div class="paragraph">
<p>In order to insert data in a datastore the configuration of the index has to be known. The index is persisted in a
special table and is referenced back via table name to a table with data in it. Therefore queries can retrieve data
without requiring index configuration. There is a restriction that only one index configuration per table is supported -
i.e. you can&#8217;t store data on both a 2D and 3D index in the same table. (You could store 2D geometry types in a 3D index
though).</p>
</div>
</div>
<div class="sect2">
<h3 id="architecture-adapters"><a class="anchor" href="#architecture-adapters"></a>Adapters</h3>
<div class="paragraph">
<p>To store geometry, attributes, and other information a format is needed that describes how to serialize and deserialize.
An interface is provided that handles the serialization and deserialization of features. A default implementation
supporting the GeoTools simple feature type is also included by default. More on this specific implementation as well
as the interface will be detailed later. In the Adapter persistence table a pointer to the java class (expected to be on
the classpath) is stored. This is loaded dynamically when the data is queried and results are translated to the native
data type</p>
</div>
<div class="sect3">
<h4 id="feature-serialization"><a class="anchor" href="#feature-serialization"></a>Feature Serialization</h4>
<div class="imageblock">
<div class="content">
<img src="./images/serialization1.png" alt="Feature Serialization">
</div>
</div>
<div class="paragraph">
<p>GeoWave allows the user to create their own data adapters - these not only determine how the data is actually stored
(serialization/deserialization), but also contain a hierarchy of attribute types. The reason for this hierarchy has to
do with extensibility vs. optimization. A data adapter could theoretically take a dependency on ffmpeg, store the
feature as metadata in a video stream, and persist that value to the database. All questions of sanity of this solution
aside, there are some additional specific issues with the way fine grain filtering is done - specifically due to the
iterators. Iterators are part of the Accumulo extensibility module and allow for arbitrary code to be plugged in directly
at the tablet server level into the core accumulo kernel. With more code in the iterators there is both a greater chance
of crashing (and taking down a tablet server - and possibly an accumulo instance), greater use of memory (memory used by
the iterator / class loader isn&#8217;t available for caching, etc., and a greater O&amp;M debt - the iterators have to be
distributed to each client out of band - and require impersonating the accumulo user (possibly root).</p>
</div>
<div class="paragraph">
<p>Based on this our target was to minimize the code, and standardize on as few iterators as possible. This conflicted with
the desire to allow maximum flexibility with arbitrary DataAdapters. A middle ground was found, and this hierarchy was
created. Some standardization was put in place around how certain data types would be stored and serialized, but a
"native data" portion was still left in place for arbitrary data - with the caveat that native data cannot be used in
distributed (iterator based) filtering - only in client side filtering.</p>
</div>
</div>
<div class="sect3">
<h4 id="primary-index-data"><a class="anchor" href="#primary-index-data"></a>Primary Index Data</h4>
<div class="paragraph">
<p>These are sets of data which are also used to construct the primary index (space filling curve). They will typically be
geometry coordinates and optionally time - but could be any set of numeric values (think decomposed feature vectors, etc.).
They cannot be null.</p>
</div>
</div>
<div class="sect3">
<h4 id="common-index-data"><a class="anchor" href="#common-index-data"></a>Common Index Data</h4>
<div class="paragraph">
<p>These are a collection of attributes. There can be any number of attributes, but they must conform to the DimensionField
interface - the attribute type must have a FieldReader and a FieldWriter that is within the classpath of the tablet
servers. We provide a basic implementation for these attribute types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
<li>
<p>Byte</p>
</li>
<li>
<p>Short</p>
</li>
<li>
<p>Float</p>
</li>
<li>
<p>Double</p>
</li>
<li>
<p>BigDecimal</p>
</li>
<li>
<p>Integer</p>
</li>
<li>
<p>Long</p>
</li>
<li>
<p>BigInteger</p>
</li>
<li>
<p>String</p>
</li>
<li>
<p>Geometry</p>
</li>
<li>
<p>Date</p>
</li>
<li>
<p>Calendar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The values that are not part of the primary index can be used for distributed secondary filtering, and can be null.
The values that are associated with the primary index will be used for fine-grained filtering within an iterator.</p>
</div>
</div>
<div class="sect3">
<h4 id="native-data"><a class="anchor" href="#native-data"></a>Native Data</h4>
<div class="paragraph">
<p>These can be literally anything. From the point of view of the data adapter they are just a binary (or Base64) encoded
chunk of data. No distributed filtering can be performed on this data except for Accumulo&#8217;s visibility filter - but the
client side filtering extensibility point can still be used if necessary. The Data Adapter has to provide methods to
serialize and deserialize these items in the form of Field Readers and Writers, but it is not necessary to have these
methods on the classpath of any Accumulo nodes.</p>
</div>
</div>
<div class="sect3">
<h4 id="statistics"><a class="anchor" href="#statistics"></a>Statistics</h4>
<div class="paragraph">
<p>Adapters provide a set of statistics stored within a statistic store.  The set of available statistics is specific to each adapter and
the set of attributes for those data items managed by the adapter. Statistics include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ranges over an attribute, including time.</p>
</li>
<li>
<p>Enveloping bounding box over all geometries.</p>
</li>
<li>
<p>Cardinality of the number of stored items.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional statistics include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Histograms over the range of values for an attribute.</p>
</li>
<li>
<p>Cardinality of discrete values of an attribute.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="architecture-accumulo"><a class="anchor" href="#architecture-accumulo"></a>Accumulo Key Structure</h3>
<div class="imageblock">
<div class="content">
<img src="./images/accumulo.png" alt="accumulo Data Schema">
</div>
</div>
<div class="paragraph">
<p>The above diagram describes the default structure of entries in the Accumulo data store. The index ID comes directly
from the tiered space filling curve implementation. We do not impose a requirement that data IDs are globally unique
but they should be unique for the adapter. Therefore, the pairing of Adapter ID and Data ID define a unique identifier
for a data element. The lengths are stored within the row ID as 4 byte integers - this enables fully reading the row ID
because these IDs can be of variable length. The number of duplicates is stored within the row ID as well to inform the
de-duplication filter whether this element needs to be temporarily stored to ensure no duplicates are sent to the caller.
The adapter ID is within the Row ID to enforce unique row IDs as a whole row iterator is used to aggregate fields for the
distributable filters. The adapter ID is also used as the column family as the mechanism for adapter-specific queries to
fetch only the appropriate column families.</p>
</div>
</div>
<div class="sect2">
<h3 id="statistics"><a class="anchor" href="#statistics"></a>Statistics</h3>
<div class="paragraph">
<p>Adapters provide a set of statistics stored within a statistic store.  The set of available statistics is specific to each adapter and
the set of attributes for those data items managed by the adapter. Statistics include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ranges over an attribute, including time.</p>
</li>
<li>
<p>Enveloping bounding box over all geometries.</p>
</li>
<li>
<p>Cardinality of the number of stored items.</p>
</li>
<li>
<p>Histograms over the range of values for an attribute.</p>
</li>
<li>
<p>Cardinality of discrete values of an attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Statistics are updated during data ingest and deletion.  Range and bounding box statistics reflect the largest range over time.
Those statistics are not updated during deletion. Cardinality-based statistics are updated upon deletion.</p>
</div>
<div class="paragraph">
<p>Statistics retain the same visibility constraints as the associated attributes.  Thus, there is a set of statistics for each unique constraint.
The statistics store answers each statistics inquiry for a given adapter with only those statistics matching the authorizations of the requester.
The statistics store merges authorized statistics covering the same attribute.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/stats_merge.png" alt="Statistics Merge">
</div>
</div>
<div class="sect3">
<h4 id="statistics-table-structure-in-accumulo"><a class="anchor" href="#statistics-table-structure-in-accumulo"></a>Statistics Table Structure in Accumulo</h4>
<div class="imageblock">
<div class="content">
<img src="./images/stats.png" alt="Statistics Structure">
</div>
</div>
<div class="sect4">
<h5 id="re-computation"><a class="anchor" href="#re-computation"></a>Re-Computation</h5>
<div class="paragraph">
<p>Re-computation of statistics is required in three circumstances:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As indexed items are removed from the adapter store, the range and envelope statistics may lose their accuracy if the removed item
contains an attribute that represents the minimum or maximum value for the population.</p>
</li>
<li>
<p>New statistics added to the statistics store after data items are ingested.  These new statistics do not reflect the entire population.</p>
</li>
<li>
<p>Software changes invalidate prior stored images of statistics.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A simple statistics tool is a command line tool to recompute all statistics for a given adapter.  The tool is soon to be replaced by a more comprehensive and efficient tool.
The tool removes all statistics for adapter, scans the entire data set and reconstructs to statistics. The tool is be executed within a JVM using any of the assembled JAR files.
The arguments to the tool are as follow, presented in the exact order required.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zookeepers - Formatted as a comma-separated string: zookeeper1:port,zookeeper2:port</p>
</li>
<li>
<p>Accumulo Instance ID - The "instance" that the Accumulo cluster.</p>
</li>
<li>
<p>Accumulo Username - The nme of the connection user associated with a user account managed by Accumulo, not a system, etc.</p>
</li>
<li>
<p>Accumulo Password - This is an Accumulo controlled secret.</p>
</li>
<li>
<p>Geowave Namespace - This is <em>not</em> an Accumulo namespace; rather think of it as a prefix Geowave uses for index table creation.</p>
</li>
<li>
<p>Geowave Adapter ID - The name of the adapter.  This is the local name for the feature name managed by the Feature Data Adapter.
This name matches the layer name in GeoServer.</p>
</li>
<li>
<p>Authorizations - Ideally, the requesting authorizations should encompass ALL authorizations of the system.  The authorizations may be provided in a comma-separated list.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Make sure JAVA_HOME is set prior to invoking the following command.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -cp /usr/local/geowave/ingest/geowave-ingest-tool.jar  mil.nga.giat.geowave.accumulo.util.StatsTool  "localhost:12342" "GeoWave" "root" "pAssWord" "test" "GpxTrack" "A,B&amp;C"</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ingest"><a class="anchor" href="#ingest"></a>Ingest</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-2"><a class="anchor" href="#overview-2"></a>Overview</h3>
<div class="imageblock">
<div class="content">
<img src="./images/ingestoverview1.png" alt="Ingest Architecture">
</div>
</div>
<div class="paragraph">
<p>In addition to the raw data to ingest, the ingest process requires an adapter to translate the native data into a format
that can be persisted into the data store. Also, the ingest process requires an Index which is a definition of all the
configured parameters that defines how data translates to row IDs (how it is indexed) and what common fields need to
be maintained within the table to be used by fine-grained and secondary filters.</p>
</div>
<div class="paragraph">
<p>The logic within the ingest process immediately ensures that the index and data adapter are persisted within the Index
Store and the Adapter Store to support self-described data discovery, although in memory implementations of both of these
stores are provided for cases when connections to Accumulo are undesirable in the ingest process (such as if ingesting
bulk data in a Map-Reduce job). Then the flow determines the set of row IDs that the data will need to be inserted in -
duplication is essential under certain circumstances and therefore data may be inserted in multiple locations
(for example, polygons that cross the dateline, or date ranges that cross binning boundaries such as
December 31-January 1 when binning by year). De-duplication is always performed as a client filter when querying the
data. This will be combined with the actual data in a persistable format (after a translation has been performed by the
adapter) to create a set of mutations.</p>
</div>
<div class="paragraph">
<p>There is a Writer interface that the data store&#8217;s AccumuloOperations will instantiate which specifies how the mutations
will actually be written. The default implementation will wrap an Accumulo BatchWriter with this interface, but in some
cases it could make sense to provide a custom implementation of the writer - if performing a bulk ingest within the
mapper or reducer of a job, it would be appropriate to define a writer to add the mutations to the context of the bulk
ingest rather than writing live to Accumulo.</p>
</div>
</div>
<div class="sect2">
<h3 id="ingest-framework"><a class="anchor" href="#ingest-framework"></a>Framework</h3>
<div class="paragraph">
<p>A plugin framework (using SPI based injection) is provided, and several methods are supported out of the box.
The plugin framework is created in geowave-ingest, and the supported types are in geowave-types.</p>
</div>
<div class="paragraph">
<p>First we will show how to build and use the built in types, and after that describe how to create a new plugin.</p>
</div>
<div class="sect3">
<h4 id="building-ingest-framework"><a class="anchor" href="#building-ingest-framework"></a>Building ingest framework</h4>
<div class="paragraph">
<p>This assumes you have already built the main project, if not first do that</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You should either edit the geowave/pom.xml file for the correct Accumulo, Hadoop, GeoTools, and GeoServer versions,
or supply command line parameters to override them.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ git clone git@github.com:ngageoint/geowave.git
$ cd geowave
$ mvn clean install</code></pre>
</div>
</div>
<div class="paragraph">
<p>now we can build the ingest framework with included types</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd geowave-types
$ mvn package -Pingest-singlejar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ingest file is now packaged in target. When packaged for installation there will be a wrapper script named geowave-ingest
that will be installed in $PATH. In a development environment were this script has not been installed you can use the
artifact directly with the command <code><code>java -jar geowave-types-VERSION-ingest-tool.jar &lt;operation&gt; &lt;options&gt;</code></code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cmd-geowave-ingest"><a class="anchor" href="#cmd-geowave-ingest"></a>Cmd: geowave-ingest</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest - Ingest data from a local file system or HDFS into GeoWave</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest</strong> &lt;operation&gt; &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest(1) command will ingest data from a local file system or HDFS into GeoWave</p>
</div>
<div class="paragraph">
<p>OPERATIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-clear</dt>
<dd>
<p>Clear ALL data from a GeoWave namespace, this actually deletes Accumulo tables prefixed by the given namespace</p>
</dd>
<dt class="hdlist1">-hdfsingest</dt>
<dd>
<p>Copy supported files from local file system to HDFS and ingest from HDFS</p>
</dd>
<dt class="hdlist1">-hdfsstage</dt>
<dd>
<p>stage supported files in local file system to HDFS</p>
</dd>
<dt class="hdlist1">-localingest</dt>
<dd>
<p>ingest supported files in local file system directly, without using HDFS</p>
</dd>
<dt class="hdlist1">-poststage</dt>
<dd>
<p>ingest supported files that already exist in HDFS</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>ADDITIONAL</p>
</div>
<div class="paragraph">
<p>Options are specific to operation choice. Use &lt;operation&gt; -h for help.</p>
</div>
<div class="paragraph">
<p>The ingest plugin supports two types of ingest, Local and HDFS. Which you use probably depends on the type and amount of
data you need to load. The framework handles abstracting across the two methods, so you only need to write the code once.</p>
</div>
<div class="paragraph">
<p>The hdfsingest option is actually just the hdfsstage and poststage methods chained together. Using them separately is
useful if you have a use case to ingest the same data multiple times from hdfs, or if you have a process that has already
loaded the data into hdfs.</p>
</div>
<div class="paragraph">
<p>Each plugin in the ingest framework is required to identify the type of files it can ingest. The coarse filter is based
on file extension, and then a secondary filter can be created based on reading the contents of the file.</p>
</div>
<div class="paragraph">
<p>The intent is to allow the user to point to a directory of files and for the framework to discover and ingest all
possible types. The user can explicitly select only certain plugins if they need to narrow this down.</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-clear"><a class="anchor" href="#operation-clear"></a>Operation: -clear</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest-clear - Delete existing GeoWave content from Accumulo</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest -clear</strong> &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest -clear(1) operator will delete all GeoWave data stored in Accumulo for the provided data set</p>
</div>
<div class="paragraph">
<p>OPTIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c, --clear</dt>
<dd>
<p>Clear ALL data stored with the same prefix as this namespace (optional; default is to append data to the namespace if it exists)</p>
</dd>
<dt class="hdlist1">-dim, --dimensionality &lt;arg&gt;</dt>
<dd>
<p>The dimensionality type for the index, either 'spatial' or 'spatial-temporal' (optional; default is 'spatial')</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Display help</p>
</dd>
<dt class="hdlist1">-i, --instance-id &lt;arg&gt;</dt>
<dd>
<p>The Accumulo instance ID</p>
</dd>
<dt class="hdlist1">-l, --list</dt>
<dd>
<p>List the available ingest types</p>
</dd>
<dt class="hdlist1">-n, --namespace &lt;arg&gt;</dt>
<dd>
<p>The table namespace (optional; default is no namespace)</p>
</dd>
<dt class="hdlist1">-p, --password &lt;arg&gt;</dt>
<dd>
<p>The password for the user</p>
</dd>
<dt class="hdlist1">-t, --types &lt;arg&gt;</dt>
<dd>
<p>Explicitly set the ingest type by name (or multiple comma-delimited types), if not set all available ingest types will be used</p>
</dd>
<dt class="hdlist1">-u, --user &lt;arg&gt;</dt>
<dd>
<p>A valid Accumulo user ID</p>
</dd>
<dt class="hdlist1">-v, --visibility &lt;arg&gt;</dt>
<dd>
<p>The visibility of the data ingested (optional; default is 'public')</p>
</dd>
<dt class="hdlist1">-z, --zookeepers &lt;arg&gt;</dt>
<dd>
<p>A comma-separated list of zookeeper servers that an Accumulo instance is using</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="operation-hdfsingest"><a class="anchor" href="#operation-hdfsingest"></a>Operation: -hdfsingest</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest-hdfsingest - Load content from an HDFS file system</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest -hdfsingest</strong> &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest -hdfsingest(1) operator first copies the local files to an Avro record in HDFS, then executes the
ingest process as a map-reduce job. Data is ingested into Geowave using the GeowaveInputFormat. This is likely to be
the fastest ingest method overall for data sets of any notable size (or if they have a large ingest/transform cost).</p>
</div>
<div class="paragraph">
<p>OPTIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-b, --base &lt;arg&gt;</dt>
<dd>
<p>Base input file or directory to crawl with one of the supported ingest types</p>
</dd>
<dt class="hdlist1">-c, --clear</dt>
<dd>
<p>Clear ALL data stored with the same prefix as this namespace (optional; default is to append data to the namespace if it exists)</p>
</dd>
<dt class="hdlist1">-dim, --dimensionality &lt;arg&gt;</dt>
<dd>
<p>The dimensionality type for the index, either 'spatial' or 'spatial-temporal' (optional; default is 'spatial')</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Display help</p>
</dd>
<dt class="hdlist1">-hdfs &lt;arg&gt;</dt>
<dd>
<p>HDFS hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-hdfsbase &lt;arg&gt;</dt>
<dd>
<p>The fully qualified path to the base directory in HDFS</p>
</dd>
<dt class="hdlist1">-i, --instance-id &lt;arg&gt;</dt>
<dd>
<p>The Accumulo instance ID</p>
</dd>
<dt class="hdlist1">-jobtracker &lt;arg&gt;</dt>
<dd>
<p>Hadoop job tracker hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-l, --list</dt>
<dd>
<p>List the available ingest types</p>
</dd>
<dt class="hdlist1">-n, --namespace &lt;arg&gt;</dt>
<dd>
<p>The table namespace (optional; default is no namespace)</p>
</dd>
<dt class="hdlist1">-p, --password &lt;arg&gt;</dt>
<dd>
<p>The password for the user</p>
</dd>
<dt class="hdlist1">-resourceman &lt;arg&gt;</dt>
<dd>
<p>YARN resource manager hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-t, --types &lt;arg&gt;</dt>
<dd>
<p>Explicitly set the ingest type by name (or multiple comma-delimited types), if not set all available ingest types will be used</p>
</dd>
<dt class="hdlist1">-u, --user &lt;arg&gt;</dt>
<dd>
<p>A valid Accumulo user ID</p>
</dd>
<dt class="hdlist1">-v, --visibility &lt;arg&gt;</dt>
<dd>
<p>The visibility of the data ingested (optional; default is 'public')</p>
</dd>
<dt class="hdlist1">-x, --extension &lt;arg&gt;</dt>
<dd>
<p>Individual or comma-delimited set of file extensions to accept (optional)</p>
</dd>
<dt class="hdlist1">-z, --zookeepers &lt;arg&gt;</dt>
<dd>
<p>A comma-separated list of zookeeper servers that an Accumulo instance is using</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>ADDITIONAL</p>
</div>
<div class="paragraph">
<p>The options here are, for the most part, same as for <strong>geowave-ingest -localingest</strong>, with a few additions.</p>
</div>
<div class="paragraph">
<p>The hdfs argument should be the hostname and port, so something like "hdfs-namenode.cluster1.com:8020".</p>
</div>
<div class="paragraph">
<p>The hdfsbase argument is the root path in hdfs that will serve as the base for the stage location. If the directory
doesn&#8217;t exist it will be created. The actual ingest file will be created in a "type" (plugin type - seen with the --list
option) subdirectory under this base directory.</p>
</div>
<div class="paragraph">
<p>The jobtracker argument is the hostname and port for the jobtracker, so something like mapreduce-namenode.cluster1.com:8021</p>
</div>
<div class="paragraph">
<p>The hdfsstage and poststage options will just be subsets of this comment; the first creating an avro file in hdfs,
the second reading this avro file and ingesting into GeoWave</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-hdfsstage"><a class="anchor" href="#operation-hdfsstage"></a>Operation: -hdfsstage</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest-hdfsstage - Load supported content from a local file system into HDFS</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest -hdfsstage</strong> &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest -hdfsstage(1) operator copies the local files to an Avro record in HDFS</p>
</div>
<div class="paragraph">
<p>OPTIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-b,--base &lt;arg&gt;</dt>
<dd>
<p>Base input file or directory to crawl with one of the supported ingest types</p>
</dd>
<dt class="hdlist1">-h,--help</dt>
<dd>
<p>Display help</p>
</dd>
<dt class="hdlist1">-hdfs &lt;arg&gt;</dt>
<dd>
<p>HDFS hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-hdfsbase &lt;arg&gt;</dt>
<dd>
<p>Fully qualified path to the base directory in hdfs</p>
</dd>
<dt class="hdlist1">-l, --list</dt>
<dd>
<p>List the available ingest types</p>
</dd>
<dt class="hdlist1">-t, --types &lt;arg&gt;</dt>
<dd>
<p>Explicitly set the ingest type by name (or multiple comma-delimited types), if not set all available ingest types will be used</p>
</dd>
<dt class="hdlist1">-x, --extension &lt;arg&gt;</dt>
<dd>
<p>Individual or comma-delimited set of file extensions to accept (optional)</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="operation-localingest"><a class="anchor" href="#operation-localingest"></a>Operation: -localingest</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest-localingest - Load content from local file system</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest -localingest</strong> &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest -localingest(1) operator will run the ingest code (parse to features, load features to accumulo)
against local file system content.</p>
</div>
<div class="paragraph">
<p>OPTIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-b, --base &lt;arg&gt;</dt>
<dd>
<p>Base input file or directory to crawl with one of the supported ingest types</p>
</dd>
<dt class="hdlist1">-c, --clear</dt>
<dd>
<p>Clear ALL data stored with the same prefix as this namespace (optional; default is to append data to the namespace if it exists)</p>
</dd>
<dt class="hdlist1">-dim, --dimensionality &lt;arg&gt;</dt>
<dd>
<p>The dimensionality type for the index, either 'spatial' or 'spatial-temporal' (optional; default is 'spatial')</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Display help</p>
</dd>
<dt class="hdlist1">-i, --instance-id &lt;arg&gt;</dt>
<dd>
<p>The Accumulo instance ID</p>
</dd>
<dt class="hdlist1">-l, --list</dt>
<dd>
<p>List the available ingest types</p>
</dd>
<dt class="hdlist1">-n, --namespace &lt;arg&gt;</dt>
<dd>
<p>The table namespace (optional; default is no namespace)</p>
</dd>
<dt class="hdlist1">-p, --password &lt;arg&gt;</dt>
<dd>
<p>The password for the user</p>
</dd>
<dt class="hdlist1">-t, --types &lt;arg&gt;</dt>
<dd>
<p>Explicitly set the ingest type by name (or multiple comma-delimited types), if not set all available ingest types will be used</p>
</dd>
<dt class="hdlist1">-u, --user &lt;arg&gt;</dt>
<dd>
<p>A valid Accumulo user ID</p>
</dd>
<dt class="hdlist1">-v, --visibility &lt;arg&gt;</dt>
<dd>
<p>The visibility of the data ingested (optional; default is 'public')</p>
</dd>
<dt class="hdlist1">-x, --extension &lt;arg&gt;</dt>
<dd>
<p>Individual or comma-delimited set of file extensions to accept (optional)</p>
</dd>
<dt class="hdlist1">-z, --zookeepers &lt;arg&gt;</dt>
<dd>
<p>A comma-separated list of zookeeper servers that an Accumulo instance is using</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>ADDITIONAL</p>
</div>
<div class="paragraph">
<p>The index type uses one of the two predefined index implementations. You can perform temporal lookup/filtering with
either, but the spatial-temporal includes indexing in the primary index - so will be more performant if spatial extents
are commonly used when querying data.</p>
</div>
<div class="paragraph">
<p>Visibility is passed to Accumulo as a string, so you should put whatever you want in here.</p>
</div>
<div class="paragraph">
<p>The namespace option is the GeoWave namespace; this will be the prefix of the GeoWave tables in Accumulo. There are a
few rules for this that derive from geotools/geoserver as well as Accumulo. To keep it simple if you only use alphabet
characters and "_" (underscore) you will be fine.</p>
</div>
<div class="paragraph">
<p>The extensions argument allows you to override the plugin types, narrowing the scope of what is passed to the plugins</p>
</div>
<div class="paragraph">
<p>The types argument allows you to explicitly only use certain plugins.</p>
</div>
<div class="paragraph">
<p>Finally, the base directory is the root directory that will be scanned on the local system for files to ingest. The
process will scan all subdirectories under the provided directory.</p>
</div>
<div class="paragraph">
<p>EXAMPLES</p>
</div>
<div class="paragraph">
<p>List all of the currently registered as ingest type plugins:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>geowave-ingest -localingest --list</strong></dt>
<dd>
<p>geotools-vector:
     all file-based vector datastores supported within geotools</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>tdrive:
     files from Microsoft Research T-Drive trajectory data set</p>
</div>
<div class="paragraph">
<p>geolife:
     files from Microsoft Research GeoLife trajectory data set</p>
</div>
<div class="paragraph">
<p>gpx:
     xml files adhering to the schema of gps exchange format</p>
</div>
<div class="paragraph">
<p>geotools-raster:
     all file-based raster formats supported within geotools</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Load some load data</dt>
<dd>
<p>geowave-ingest -localingest -b ./ingest -i instance -n adminborders -p pass -t geotools-vector -u user -z zoo-1:2181</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="operation-poststage"><a class="anchor" href="#operation-poststage"></a>Operation: -poststage</h3>
<div class="paragraph">
<p>NAME</p>
</div>
<div class="paragraph">
<p>geowave-ingest-poststage - Ingest supported content that has already been staged in HDFS</p>
</div>
<div class="paragraph">
<p>SYNOPSIS</p>
</div>
<div class="paragraph">
<p><strong>geowave-ingest -poststage</strong> &lt;options&gt;</p>
</div>
<div class="paragraph">
<p>DESCRIPTION</p>
</div>
<div class="paragraph">
<p>The geowave-ingest -poststage(1) operator executes the ingest process as a map-reduce job using data that has already
been staged in an HDFS file system</p>
</div>
<div class="paragraph">
<p>OPTIONS</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c, --clear</dt>
<dd>
<p>Clear ALL data stored with the same prefix as this namespace (optional; default is to append data to the namespace if it exists)</p>
</dd>
<dt class="hdlist1">-dim, --dimensionality &lt;arg&gt;</dt>
<dd>
<p>The dimensionality type for the index, either 'spatial' or 'spatial-temporal' (optional; default is 'spatial')</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Display help</p>
</dd>
<dt class="hdlist1">-hdfs &lt;arg&gt;</dt>
<dd>
<p>HDFS hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-hdfsbase &lt;arg&gt;</dt>
<dd>
<p>Fully qualified path to the base directory in HDFS</p>
</dd>
<dt class="hdlist1">-i, --instance-id &lt;arg&gt;</dt>
<dd>
<p>The Accumulo instance ID</p>
</dd>
<dt class="hdlist1">-jobtracker &lt;arg&gt;</dt>
<dd>
<p>Hadoop job tracker hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-l, --list</dt>
<dd>
<p>List the available ingest types</p>
</dd>
<dt class="hdlist1">-n, --namespace &lt;arg&gt;</dt>
<dd>
<p>The table namespace (optional; default is no namespace)</p>
</dd>
<dt class="hdlist1">-p, --password &lt;arg&gt;</dt>
<dd>
<p>The password for the user</p>
</dd>
<dt class="hdlist1">-resourceman &lt;arg&gt;</dt>
<dd>
<p>YARN resource manager hostname and port in the format hostname:port</p>
</dd>
<dt class="hdlist1">-t, --types &lt;arg&gt;</dt>
<dd>
<p>Explicitly set the ingest type by name (or multiple comma-delimited types), if not set  all available ingest types will be used</p>
</dd>
<dt class="hdlist1">-u, --user &lt;arg&gt;</dt>
<dd>
<p>A valid Accumulo user ID</p>
</dd>
<dt class="hdlist1">-v, --visibility &lt;arg&gt;</dt>
<dd>
<p>The visibility of the data ingested (optional; default is 'public')</p>
</dd>
<dt class="hdlist1">-z,--zookeepers &lt;arg&gt;</dt>
<dd>
<p>A comma-separated list of zookeeper servers that an Accumulo instance is using</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="ingesting-all-the-things"><a class="anchor" href="#ingesting-all-the-things"></a>Ingesting all the things</h4>
<div class="paragraph">
<p>We can ingest any data type that has been listed as an ingest plugin. Let&#8217;s start out with the GeoTools datastore; this
wraps a bunch of GeoTools supported formats. We will use the shapefile capability for our example here.</p>
</div>
</div>
<div class="sect3">
<h4 id="something-recognizable"><a class="anchor" href="#something-recognizable"></a>Something recognizable</h4>
<div class="paragraph">
<p>The naturalearthdata side has a few shapefile we can use use. On the page
<a href="http://www.naturalearthdata.com/downloads/50m-cultural-vectors/">50m Cultural Vectors</a></p>
</div>
<div class="paragraph">
<p>Let&#8217;s download the Admin 0 - Countries shapefile:
<a href="http://naciscdn.org/naturalearth/50m/cultural/ne_50m_admin_0_countries.zip">ne_50m_admin_0_countries.zip</a></p>
</div>
<div class="paragraph">
<p>Okay, let&#8217;s ingest this. I&#8217;ll take some liberty with the file locations,
but the process should be obvious</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ mkdir ingest
$ mv ne_50m_admin_0_countries.zip ingest/
$ cd ingest
$ unzip ne_50m_admin_0_countries.zip
$ rm ne_50m_admin_0_countries.zip
$ cd ..
$ geowave-ingest -localingest -b ./ingest -i ACCUMULO_INSTANCE_NAME -n geowave.50m_admin_0_countries -t geotools-vector -u USERNAME -p PASSWORD -z zoo-1:2181</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ingest-standalone"><a class="anchor" href="#ingest-standalone"></a>Standalone</h3>
<div class="paragraph">
<p>There are multiple ways to get data into GeoWave. In other sections we will discuss higher order frameworks, mapreduce
interfaces, etc. The intent here is "just the basics" - what&#8217;s the least framework intensive way that one can load
geospatial data.</p>
</div>
<div class="paragraph">
<p>Information here will reference the SimpleIngest and SimpleIngestProducerConsumer examples in the geowave-examples project.</p>
</div>
<div class="sect3">
<h4 id="minimum-information-needed"><a class="anchor" href="#minimum-information-needed"></a>Minimum information needed</h4>
<div class="paragraph">
<p>Geowave requires a few pieces of fundamental information in order to persist data - these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BasicAccumuloOperations object</p>
</li>
<li>
<p>This class contains the information required to connect to an accumulo instance - and which table to use in accumulo.</p>
<div class="ulist">
<ul>
<li>
<p>Zookeepers - in the format zookeeper1:port,zookeeper2:port,etc&#8230;&#8203;</p>
</li>
<li>
<p>Accumulo Instance ID - this is the "instance" that the Accumulo cluster you are connecting to was initialized with. It&#8217;s a global
setting per cluster.</p>
</li>
<li>
<p>Accumulo Username - this is the name of the user you would like to connect as. This is a user account managed by
accumulo, not a system, etc. user.</p>
</li>
<li>
<p>Accumulo Password - this is the password associated with the user specified above. Again, this is an accumulo
controlled secret.</p>
</li>
<li>
<p>Geowave Namespace - this is <em>not</em> an Accumulo namespace; rather think of it as a prefix geowave will use on any
tables it creates. The only current constraint is only one index type is allowed per namespace.</p>
</li>
</ul>
</div>
</li>
<li>
<p>SimpleFeatureType instance</p>
</li>
<li>
<p><a href="http://www.opengeospatial.org/standards/sfs">Simple Feature Types</a> are an OGC specification for defining geospatial
features. Leveraging this standard is one of the easiest ways to get GIS data into GeoWave</p>
</li>
<li>
<p>SimpleFeatureType instance - org.opengis.feature.simple.SimpleFeatureType - this defines the names, types, and other
metadata (nullable, etc) of a feature. Think of it as a Map of Name:Values where the values are typed.</p>
</li>
<li>
<p>DataAdapter instance</p>
</li>
<li>
<p>A geowave data adapter is an implementation of the DataAdapter interface that handles the persistence serialization of
whatever the object you are storing.</p>
</li>
<li>
<p>We are storing SimpleFeatures, so can leverage the provided FeatureDataAdapter</p>
</li>
<li>
<p>Index instance</p>
</li>
<li>
<p>The final piece needed - the index defines which attributes are indexed, and how that index is constructed.</p>
</li>
<li>
<p>There are lots of options for index configuration, but for convenience we have provided two defaults</p>
</li>
<li>
<p>DataStore</p>
</li>
<li>
<p>This is the piece that puts everything above together.</p>
</li>
<li>
<p>Initialization required a BasicAccumuloOperations instance, the rest are provided as parameters for calls which need them.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ingest-some-data"><a class="anchor" href="#ingest-some-data"></a>Ingest some data</h4>
<div class="paragraph">
<p>Here we will programmatically generate a grid of points at each location where a whole number latitude and longitude intersect.</p>
</div>
</div>
<div class="sect3">
<h4 id="basic-accumulo-operations"><a class="anchor" href="#basic-accumulo-operations"></a>Basic Accumulo Operations</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">/***
 * The class tells geowave about the accumulo instance it should connect to, as well as what tables it should create/store it's data in
 * @param zookeepers Zookeepers associated with the accumulo instance, comma separate
 * @param accumuloInstance  Accumulo instance name
 * @param accumuloUser   User geowave should connect to accumulo as
 * @param accumuloPass   Password for user to connect to accumulo
 * @param geowaveNamespace    Different than an accumulo namespace (unfortunate naming usage) - this is basically a prefix on the table names geowave uses.
 * @return  Object encapsulating the accumulo connection information
 * @throws AccumuloException
 * @throws AccumuloSecurityException
 */
protected BasicAccumuloOperations getAccumuloInstance(String zookeepers, String accumuloInstance, String accumuloUser, String accumuloPass, String geowaveNamespace)
  throws AccumuloException, AccumuloSecurityException {
    return new BasicAccumuloOperations(zookeepers, accumuloInstance, accumuloUser, accumuloPass, geowaveNamespace);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="simple-feature-type"><a class="anchor" href="#simple-feature-type"></a>Simple Feature Type</h4>
<div class="paragraph">
<p>We know fore sure we need a geometry field. Everything else is really optional. It&#8217;s often convenient to add a text
latitude and longitude field for ease of display values (getFeatureInfo, etc.).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">/***
 * A simple feature is just a mechanism for defining attributes (a feature is just a collection of attributes + some metadata)
 * We need to describe what our data looks like so the serializer (FeatureDataAdapter for this case) can know how to store it.
 * Features/Attributes are also a general convention of GIS systems in general.
 * @return Simple Feature definition for our demo point feature
 */
protected SimpleFeatureType createPointFeatureType(){

    final SimpleFeatureTypeBuilder builder = new SimpleFeatureTypeBuilder();
    final AttributeTypeBuilder ab = new AttributeTypeBuilder();


    //Names should be unique (at least for a given GeoWave namespace) - think about names in the same sense as a full classname
    //The value you set here will also persist through discovery - so when people are looking at a dataset they will see the
    //type names associated with the data.
    builder.setName("Point");

    //The data is persisted in a sparse format, so if data is nullable it will not take up any space if no values are persisted.
    //Data which is included in the primary index (in this example lattitude/longtiude) can not be null
    //Calling out latitude an longitude separately is not strictly needed, as the geometry contains that information.  But it's
    //convienent in many use cases to get a text representation without having to handle geometries.
    builder.add(ab.binding(Geometry.class).nillable(false).buildDescriptor("geometry"));
    builder.add(ab.binding(Date.class).nillable(true).buildDescriptor("TimeStamp"));
    builder.add(ab.binding(Double.class).nillable(false).buildDescriptor("Latitude"));
    builder.add(ab.binding(Double.class).nillable(false).buildDescriptor("Longitude"));
    builder.add(ab.binding(String.class).nillable(true).buildDescriptor("TrajectoryID"));
    builder.add(ab.binding(String.class).nillable(true).buildDescriptor("Comment"));

    return builder.buildFeatureType();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spatial-index-2"><a class="anchor" href="#spatial-index-2"></a>Spatial index</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">/***
 * We need an index model that tells us how to index the data - the index determines
 * -What fields are indexed
 * -The precision of the index
 * -The range of the index (min/max values)
 * -The range type (bounded/unbounded)
 * -The number of "levels"  (different precisions, needed when the values indexed has ranges on any dimension)
 * @return GeoWave index for a default SPATIAL index
 */
protected Index createSpatialIndex(){

    //Reasonable values for spatial and spatio-temporal are provided through static factory methods.
    //They are intended to be a reasonable starting place - though creating a custom index may provide better
    //performance is the distribution/characterization of the data is well known.
    return IndexType.SPATIAL.createDefaultIndex();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="data-adapter"><a class="anchor" href="#data-adapter"></a>Data Adapter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">/***
 * The dataadapter interface describes how to serialize a data type.
 * Here we are using an implementation that understands how to serialize
 * OGC SimpleFeature types.
 * @param sft  simple feature type you want to generate an adapter from
 * @return data adapter that handles serialization of the sft simple feature type
 */
protected FeatureDataAdapter createDataAdapter(SimpleFeatureType sft){
    return new FeatureDataAdapter(sft);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="generating-and-loading-points"><a class="anchor" href="#generating-and-loading-points"></a>Generating and loading points</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">protected void generateGrid(
            final BasicAccumuloOperations bao ) {

        // create our datastore object
        final DataStore geowaveDataStore = getGeowaveDataStore(bao);

        // In order to store data we need to determine the type of data store
        final SimpleFeatureType point = createPointFeatureType();

        // This a factory class that builds simple feature objects based on the
        // type passed
        final SimpleFeatureBuilder pointBuilder = new SimpleFeatureBuilder(
                point);

        // This is an adapter, that is needed to describe how to persist the
        // data type passed
        final FeatureDataAdapter adapter = createDataAdapter(point);

        // This describes how to index the data
        final Index index = createSpatialIndex();

        // features require a featureID - this should be unqiue as it's a
        // foreign key on the feature
        // (i.e. sending in a new feature with the same feature id will
        // overwrite the existing feature)
        int featureId = 0;

        // get a handle on a GeoWave index writer which wraps the Accumulo
        // BatchWriter, make sure to close it (here we use a try with resources
        // block to close it automatically)
        try (IndexWriter indexWriter = geowaveDataStore.createIndexWriter(index)) {
            // build a grid of points across the globe at each whole
            // lattitude/longitude intersection
            for (int longitude = -180; longitude &lt;= 180; longitude++) {
                for (int latitude = -90; latitude &lt;= 90; latitude++) {
                    pointBuilder.set(
                            "geometry",
                            GeometryUtils.GEOMETRY_FACTORY.createPoint(new Coordinate(
                                    longitude,
                                    latitude)));
                    pointBuilder.set(
                            "TimeStamp",
                            new Date());
                    pointBuilder.set(
                            "Latitude",
                            latitude);
                    pointBuilder.set(
                            "Longitude",
                            longitude);
                    // Note since trajectoryID and comment are marked as
                    // nillable we
                    // don't need to set them (they default ot null).

                    final SimpleFeature sft = pointBuilder.buildFeature(String.valueOf(featureId));
                    featureId++;
                    indexWriter.write(
                            adapter,
                            sft);
                }
            }
        }
        catch (final IOException e) {
            log.warn(
                    "Unable to close index writer",
                    e);
        }
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="other-methods"><a class="anchor" href="#other-methods"></a>Other methods</h4>
<div class="paragraph">
<p>There are other patterns that can be used - see the various classes in the geowave-examples project. The method displayed
above is the suggested pattern - it&#8217;s demonstrated in SimpleIngestIndexWriter.java</p>
</div>
<div class="paragraph">
<p>The other methods displayed work, but are either more complicated than necessary (SimpleIngestProducerConsumer.java) or
not very efficient (SimpleIngest.java).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ingest-plugins"><a class="anchor" href="#ingest-plugins"></a>Ingest plugins</h3>
<div class="paragraph">
<p>The geowave-types project comes with several plugins out of the box</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ geowave-ingest -localingest --list
Available ingest types currently registered as plugins:

tdrive:
     files from Microsoft Research T-Drive trajectory data set

geotools:
     all file-based datastores supported within geotools

geolife:
     files from Microsoft Research GeoLife trajectory data set

gpx:
     xml files adhering to the schema of gps exchange format</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query"><a class="anchor" href="#query"></a>Query</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-3"><a class="anchor" href="#overview-3"></a>Overview</h3>
<div class="imageblock">
<div class="content">
<img src="./images/queryoverview1.png" alt="Query Architecture">
</div>
</div>
<div class="paragraph">
<p>A query in GeoWave currently consists of a set of ranges on the dimensions of the primary index. Up to 3 dimensions
(plus temporal optionally) can take advantage of any complex OGC geometry for the query window. For dimensions of 4
or greater the query can only be a set of ranges on each dimension (i.e. hyper-rectangle, etc.).</p>
</div>
<div class="paragraph">
<p>The query geometry is decomposed by GeoWave into a series of ranges on a one dimensional number line - based on a compact
Hilbert space filling curve ordering. These ranges are sent through an Accumulo batch scanner to all the tablet servers.
These ranges represent the coarse grain filtering.</p>
</div>
<div class="paragraph">
<p>At the same time the query geometry has been serialized and sent to custom Accumulo iterators. These iterators then do
a second stage filtering on each feature for an exact intersection test. Only if the stored geometry and the query
geometry intersect does the processing chain continue.</p>
</div>
<div class="paragraph">
<p>A second order filter can then be applied - this is used to remove features based on additional attributes - typically
time or other feature attributes. These operators can only exclude items from the set defined by the range - they cannot
include additional features. Think "AND" operators - not "OR".</p>
</div>
<div class="paragraph">
<p>A final filter is possible on the client set - after all the returned results have been aggregated together. Currently
this is only used for final deduplication. Whenever possible the distributed filter options should be used - as it splits
the work load among all the tablet servers.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="third-party"><a class="anchor" href="#third-party"></a>Third Party</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="geoserver"><a class="anchor" href="#geoserver"></a>GeoServer</h3>
<div class="paragraph">
<p>Geowave supports both raster images and vector data exposed through Geoserver.</p>
</div>
<div class="sect3">
<h4 id="wfs-t"><a class="anchor" href="#wfs-t"></a>WFS-T</h4>
<div class="paragraph">
<p>Extending Geotools, Geowave supports WFS-T for vector data. After following the deployment steps, Geowave appears as a
data store type called 'GeoWave Datastore'.</p>
</div>
<div class="paragraph">
<p>On the Geowave data store creation tab, the system prompts for the following properties.</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Constraints</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZookeeperServers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of Zookeeper host and port.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host and port are separated by a colon (host:port).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InstanceName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Accumulo tablet server&#8217;s instance name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name matches the one configured in Zookeeper.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Accumulo user name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user should have administrative privileges to add and remove authorized visibility constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accumulo user&#8217;s password.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The table namespace associated with this Accumlo data store</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lock Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select one from a list of lock managers.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zookeeper is required with a multiple Geoserver architecture.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorization Management Provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select from a list of providers.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorization Data URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL for an external supporting service or configuration file.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interpretation of the URL depends on the selected provider.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="transactions"><a class="anchor" href="#transactions"></a>Transactions</h5>
<div class="paragraph">
<p>Most operations under WFS-T use an auto-commit transaction. WFS-T does support long running transactions across multiple
requests by using a lock request followed by subsequent use of a provided lock ID. The Geowave implementation supports
transaction isolation. Consistency during a commit is not fully supported. Thus, a failure during a commit of a
transaction may leave the affected data in an intermediary state&#8212;&#8203;some deletions, updates or insertions may not be
processed. The client application must implement its on compensation logic upon receiving a commit-time error response.
As expected with Accumulo, operations on a single feature instances are atomic.</p>
</div>
</div>
<div class="sect4">
<h5 id="lock-management"><a class="anchor" href="#lock-management"></a>Lock Management</h5>
<div class="paragraph">
<p>Lock management supports life-limited locks on feature instances. There are only two supported lock managers: in memory
and Zookeeper. Memory is suitable for single Geoserver instance installations.</p>
</div>
</div>
<div class="sect4">
<h5 id="index-selection"><a class="anchor" href="#index-selection"></a>Index Selection</h5>
<div class="paragraph">
<p>Data written through WFS-T is indexed within a single index.  The adapter inspects existing indices, finding one that matches
the data requirements.  A geo-temporal index is chosen for features with temporal attributes.  The adapter creates a geo-spatial index
upon failure of finding a suitable index.  Geo-temporal index is not created, regardless of the existence of temporal attributes.  Currently,
geo-temporal indices lead to poor performance for queries requesting vectors over large spans of time.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authorization-management"><a class="anchor" href="#authorization-management"></a>Authorization Management</h4>
<div class="paragraph">
<p>Authorization Management provides the set of credentials compared against the security labels attached to each cell.
Authorization Management determines the set of authorizations associated with each WFS-T request. The available
Authorization Management strategies are registered through the Server Provider model, within the file
<code>META-INF/services/mil.nga.giat.geowave.vector.auth.AuthorizationFactorySPI</code>.</p>
</div>
<div class="paragraph">
<p>The provided implementations include the following:
. Empty - Each request is processed without additional authorization.
. JSON - The requester user name, extracted from the Security Context, is used as a key to find the user&#8217;s set of
authorizations from a JSON file. The location of the JSON file is determined by the associated <em>Authorization Data URL</em>
(e.g. <a href="file://opt/config/auth.json" class="bare">file://opt/config/auth.json</a>). An example of the contents of the JSON file is given below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json" data-lang="json">    {
      "authorizationSet": {
         "fred" : ["1","2","3"],
         "barney" : ["a"]
      }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fred has three authorization labels. Barney has one.</p>
</div>
</div>
<div class="sect3">
<h4 id="visibility-management"><a class="anchor" href="#visibility-management"></a>Visibility Management</h4>
<div class="paragraph">
<p>Visibility constraints, applied to feature instances during insertions, are ultimately determined a
<code>mil.nga.giat.geowave.store.data.field.FieldWriter</code>, of which there are writers for each supported data type in
Geoserver. By default, the set visibility expression attached to each feature property is empty. Visibility Management
supports selection of a strategy by wrapping each writer to provide visibility. This alleviates the need to extend the
type specific FieldWriters.</p>
</div>
<div class="paragraph">
<p>The visibility management strategy is registered through the Java Server Provider model, within in the file
<code>META-INF/services/mil.nga.giat.geowave.vector.plugin.visibility.ColumnVisibilityManagement</code>. The only provided
implementation is the <code>JsonDefinitionColumnVisibilityManagement</code>. The implementation expects an property within each
feature instance to contain a JSON string describing how to set the visibility for each property of the feature
instance. This approach allows each instance to determine its own visibility criteria.</p>
</div>
<div class="paragraph">
<p>Each name/value pair within the JSON structure defines the visibility for the associated feature property with the same
name. In the following example, the <em>geometry</em> property is given a visibility <code>S</code>; the eventName is given a visibility <code>TS</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json" data-lang="json">{ "geometry" : "S", "eventName": "TS" }</code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON attributes can be regular expressions, matching more than one feature property name. In the example, all properties
except for those that start with 'geo' have visibility <code>TS</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json" data-lang="json">{ "geo.*" : "S", ".*" : "TS" }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The order of the name/value pairs must be considered if one rule is more general than another, as shown in the example.
The rule <code>.<strong></code> matches all properties. The more specific rule <code>geo.</strong></code> must be ordered first.</p>
</div>
<div class="paragraph">
<p>The system extracts the JSON visibility string from a feature instance property named <code>GEOWAVE_VISIBILITY</code>. Selection
of an alternate property is achieved by setting the associated attribute descriptor 'visibility' to the boolean value TRUE.</p>
</div>
</div>
<div class="sect3">
<h4 id="statistics-2"><a class="anchor" href="#statistics-2"></a>Statistics</h4>
<div class="paragraph">
<p>The adapter captures statistics for each numeric, temporal and geo-spatial attribute.  Statistics are used to constrain queries and
answer inquiries by GeoServer for data ranges, as required for map requests and calibration of zoom levels in Open Layers.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-from-rpm"><a class="anchor" href="#installation-from-rpm"></a>Installation from RPM</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-4"><a class="anchor" href="#overview-4"></a>Overview</h3>
<div class="paragraph">
<p>There is a public <a href="http://s3.amazonaws.com/geowave-rpms/index.html">GeoWave RPM Repo</a> available with the following packages.
As you&#8217;ll need to coordinate a restart of Accumulo to pick up changes to the GeoWave iterator classes the repos default to
be disabled so you can keep auto updates enabled. When ready to do an update simply add <code>--enablerepo=geowave</code> to your
command.</p>
</div>
</div>
<div class="sect2">
<h3 id="examples"><a class="anchor" href="#examples"></a>Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash"># Use GeoWave repo RPM to configure a host and search for GeoWave RPMs to install
rpm -Uvh http://s3.amazonaws.com/geowave-rpms/release/noarch/geowave-repo-dev-1.0-3.noarch.rpm
yum --enablerepo=geowave search geowave

# Install GeoWave Accumulo iterator on a host (probably a namenode)
yum --enablerepo=geowave install geowave-cdh5-accumulo

# Update
yum --enablerepo=geowave install geowave-*
Restart Accumulo service</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. GeoWave RPMs</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-accumulo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accumulo Components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-core</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core (home directory and geowave user)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-docs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation (HTML, PDF and man pages)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-ingest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingest Tool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-jetty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoServer Components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-puppet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Puppet Scripts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-cdh5-single-host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All GeoWave Components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-repo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoWave RPM Repo config file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geowave-repo-dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoWave Development RPM Repo config file</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-from-source"><a class="anchor" href="#installation-from-source"></a>Installation from Source</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="geoserver-2"><a class="anchor" href="#geoserver-2"></a>GeoServer</h3>
<div class="sect3">
<h4 id="geoserver-versions"><a class="anchor" href="#geoserver-versions"></a>GeoServer Versions</h4>
<div class="paragraph">
<p>GeoWave is currently built against GeoServer 2.6.1 and GeoTools 12.1 with the GeoTools version linked to the GeoServer
version. If wish to deploy against a different version simply change the value in the pom and rebuild (see: building) -
but no guarantees.</p>
</div>
</div>
<div class="sect3">
<h4 id="geoserver-install"><a class="anchor" href="#geoserver-install"></a>GeoServer Install</h4>
<div class="paragraph">
<p>First we need to build the GeoServer plugin - from the GeoWave root directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd geowave-gt
$ mvn package -Pgeotools-container-singlejar</code></pre>
</div>
</div>
<div class="paragraph">
<p>let&#8217;s assume you have GeoServer deployed in a Tomcat container in
/opt/tomcat</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cp target/geowave-gt-*-geoserver-singlejar.jar /opt/tomcat/webapps/geoserver/WEB-INF/lib/</code></pre>
</div>
</div>
<div class="paragraph">
<p>and re-start Tomcat</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="accumulo"><a class="anchor" href="#accumulo"></a>Accumulo</h3>
<div class="sect3">
<h4 id="accumulo-versions"><a class="anchor" href="#accumulo-versions"></a>Accumulo Versions</h4>
<div class="paragraph">
<p>GeoWave has been tested and works against accumulo 1.5.0, 1.5.1, and 1.6.0. If you wish to build against a different
version simply change the value in the pom.</p>
</div>
</div>
<div class="sect3">
<h4 id="accumulo-install"><a class="anchor" href="#accumulo-install"></a>Accumulo Install</h4>
<div class="paragraph">
<p>This should be very familiar by now; from the geowave root directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd geowave-gt
$ mvn package -Paccumulo-container-singlejar</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accumulo-configuration"><a class="anchor" href="#accumulo-configuration"></a>Accumulo Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-5"><a class="anchor" href="#overview-5"></a>Overview</h3>
<div class="paragraph">
<p>The recommended Accumulo configuration for GeoWave requires several manual configuration steps but isolates the GeoWave
libraries in application specific classpath(s) reducing the possibility of dependency conflict issues. A single user for
all of geowave data or a user per data type are two of the many local configuration options just ensure each namespace
containing GeoWave tables is configured to pick up the geowave-accumulo.jar.</p>
</div>
<div class="sect3">
<h4 id="procedure"><a class="anchor" href="#procedure"></a>Procedure</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a user and namespace</p>
</li>
<li>
<p>Grant the user ownership permissions on all tables created within the application namespace</p>
</li>
<li>
<p>Create an application or data set specific classpath</p>
</li>
<li>
<p>Configure all tables within the namespace to use the application classpath</p>
</li>
<li>
<p>Configure GeoWave transaction support</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">accumulo shell -u root
createuser geowave <i class="conum" data-value="1"></i><b>(1)</b>
createnamespace geowave
grant NameSpace.CREATE_TABLE -ns geowave -u geowave
config -s general.vfs.context.classpath.geowave=hdfs://NAME_NODE_FQDN:8020/accumulo/classpath/geowave/[^.].*.jar
config -ns geowave -s table.classpath.context=geowave
exit <i class="conum" data-value="2"></i><b>(2)</b>
# From the node with the GeoWave application server installed
java -cp "/usr/local/geowave/geoserver/webapps/geoserver/WEB-INF/lib/*" mil.nga.giat.geowave.vector.plugin.GeoWaveGTDataStore -z ZOOKEEPER_NODE:2181 -i accumulo -u root -p ROOT_PASSWORD -n geowave -m 20</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You&#8217;ll be prompted for a password</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Done with Accumulo specific configs</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These manual configuration steps have to be performed once after the first install of GeoWave. After the initial install you
may elect to do further user and namespace creation and configuring to provide isolation between groups and data sets</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="versioning"><a class="anchor" href="#versioning"></a>Versioning</h3>
<div class="paragraph">
<p>It&#8217;s of critical importance to ensure that the various GeoWave components are all the same version and that your client is of the same version
that was used to write the data.</p>
</div>
<div class="sect3">
<h4 id="basic"><a class="anchor" href="#basic"></a>Basic</h4>
<div class="paragraph">
<p>The RPM packaged version of GeoWave puts a timestamp in the name so it&#8217;s pretty easy to verify that you have a matched set of RPMs installed.
After an update of the components you must restart Accumulo to get vfs to download the new versions and this should keep everything synched.</p>
</div>
<div class="listingblock">
<div class="title">Compare version and timestamps of installed RPMs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[spohnae@c1-master ~]$ rpm -qa | grep geowave
geowave-cdh5-ingest-0.8.4-201503252335.noarch
geowave-cdh5-core-0.8.4-201503252335.noarch
geowave-cdh5-accumulo-0.8.4-201503252335.noarch
geowave-cdh5-docs-0.8.4-201503252335.noarch</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="advanced"><a class="anchor" href="#advanced"></a>Advanced</h4>
<div class="paragraph">
<p>When GeoWave tables are first accessed on a tablet server the vfs classpath tells Accumulo where to download the jar file from HDFS.
The jar file is copied into the local /tmp directory (the default general.vfs.cache.dir setting anyway) and loaded onto the classpath.
If there is ever doubt as to if these versions match you can use the commands below from a tablet server node to verify the version of
this artifact.</p>
</div>
<div class="listingblock">
<div class="title">Commit hash of the jar in HDFS</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">sudo -u hdfs hadoop fs -cat /accumulo/classpath/geowave/geowave-accumulo-build.properties | grep scm.revision | sed s/project.scm.revision=//</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Compare with the versions downloaded locally</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">sudo find /tmp -name "*geowave-accumulo.jar" -exec unzip -p {} build.properties  \; | grep scm.revision | sed s/project.scm.revision=//</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[spohnae@c1-node-03 ~]$ sudo -u hdfs hadoop fs -cat /accumulo/classpath/geowave/geowave-accumulo-build.properties | grep scm.revision | sed s/project.scm.revision=//
294ffb267e6691de3b9edc80e312bf5af7b2d23f <i class="conum" data-value="1"></i><b>(1)</b>
[spohnae@c1-node-03 ~]$ sudo find /tmp -name "*geowave-accumulo.jar" -exec unzip -p {} build.properties  \; | grep scm.revision | sed s/project.scm.revision=//
294ffb267e6691de3b9edc80e312bf5af7b2d23f <i class="conum" data-value="2"></i><b>(2)</b>
294ffb267e6691de3b9edc80e312bf5af7b2d23f <i class="conum" data-value="2"></i><b>(2)</b>
25cf0f895bd0318ce4071a4680d6dd85e0b34f6b</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the version loaded into hdfs and should be present on all tablet servers once Accumulo has been restarted</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The find command will probably locate a number of different versions depending on how often you clean out /tmp.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There may be multiple versions copies present, one per JVM, the error scenario is when a tablet server is missing the correct iterator jar.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-2"><a class="anchor" href="#building-2"></a>Building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GeoWave will shortly be available in maven central (for tagged releases), but until then - or to get the latest
features - building GeoWave from source is the best bet.</p>
</div>
<div class="sect2">
<h3 id="application-dependencies"><a class="anchor" href="#application-dependencies"></a>Application Dependencies</h3>
<div class="paragraph">
<p>This <em>ultra</em> quickstart assumes you have installed and configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://git-scm.com/">Git</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java JDK</a> (&gt;= 1.7). The OracleJDK is the most thoroughly tested, but there
are no known issues with OpenJDK.</p>
</li>
<li>
<p><a href="http://geoserver.org/">GeoServer</a> instance &gt;= 2.5.2 (due to: <a href="http://jira.codehaus.org/browse/GEOT-4587">GEOT-4587</a>)</p>
</li>
<li>
<p><a href="http://projects.apache.org/projects/accumulo.html">Apache Accumulo</a> version 1.5 or greater is required. 1.5.0, 1.5.1, and 1.6.0 have all
been tested.</p>
</li>
<li>
<p><a href="http://hadoop.apache.org/">Apache Hadoop</a> versions 1.x and 2.x <em>should</em> all work. The software has specifically been run on:</p>
</li>
<li>
<p><a href="http://cloudera.com/content/cloudera/en/home.html">Cloudera</a> CDH4 and CDH5 (MR1)</p>
</li>
<li>
<p><a href="http://hortonworks.com/hdp/">Hortonworks Data Platform</a> 2.1.<br></p>
</li>
<li>
<p>MapReduce 1 with the new API (org.apache.hadoop.mapreduce.*) is used. Testing is underway against YARN / MR2 and seems to be positive, but
well, it&#8217;s still underway.</p>
</li>
<li>
<p><a href="http://download.java.net/media/jai/builds/release/1_1_3/">Java Advanced Imaging</a> and <a href="http://download.java.net/media/jai-imageio/builds/release/1.1/">Java
Image I/O</a> are also both required to be installed on the GeoServer instance(s) <em>as well</em> as on the Accumulo nodes. The Accumulo support is
only required for certain functions (distributed rendering) - so this may be skipped in some cases.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="maven-dependencies"><a class="anchor" href="#maven-dependencies"></a>Maven dependencies</h3>
<div class="paragraph">
<p>Required repositories not in Maven Central have been added to the parent POM. Specifically the cloudera and opengeo repos.</p>
</div>
</div>
<div class="sect2">
<h3 id="build-process"><a class="anchor" href="#build-process"></a>Build Process</h3>
<div class="paragraph">
<p>Checkout geowave, and run a maven install.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ git clone git@github.com:ngageoint/geowave.git
$ cd geowave &amp;&amp; mvn install</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Integration Tests: Windows</p>
</div>
<div class="paragraph">
<p>Integration tests are currently not working on Windows out of the box. If you install cygwin and set the environmental variable CYGPATH to the
location of the cygpath binary provided by cygwin then is should work. Eclipse and Avro generated files</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="avro"><a class="anchor" href="#avro"></a>Avro</h3>
<div class="paragraph">
<p>There are Avro generated sources in the geowave-types project and geowave-ingest.  They can be created by running "mvn generate-sources" (and are compiled as part of the standard maven lifecycle normally).  Unfortunately, I can&#8217;t seem to make eclipse run this portion of the lifecycle on import with the M2E plugin.   On first import simply type "mvn generate-sources" at the command line and then refresh your eclipse project.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pdal"><a class="anchor" href="#pdal"></a>PDAL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Point Data Abstraction Library <a href="http://www.pdal.io/index.html">PDAL</a> is a BSD licensed library for translating
and manipulating point cloud data of various formats.  GeoWave is supported as a plugin for PDAL for both reading
and writing data to Accumulo.</p>
</div>
<div class="sect2">
<h3 id="geowave-plugin-setup"><a class="anchor" href="#geowave-plugin-setup"></a>GeoWave Plugin Setup</h3>
<div class="sect3">
<h4 id="prepackaged-rpm-setup"><a class="anchor" href="#prepackaged-rpm-setup"></a>Prepackaged RPM Setup</h4>
<div class="paragraph">
<p>Coming Soon&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>For a quick and easy setup, you can grab one of our prepackaged RPMs.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="manual-setup"><a class="anchor" href="#manual-setup"></a>Manual Setup</h3>
<div class="paragraph">
<p>If you want to integrate with the latest version of GeoWave or perhaps a specific branch, you can build the Jace bindings yourself.</p>
</div>
<div class="sect3">
<h4 id="step-1-checkout-pdal-and-geowave"><a class="anchor" href="#step-1-checkout-pdal-and-geowave"></a>Step 1 - Checkout PDAL and GeoWave</h4>
<div class="paragraph">
<p>First, we need to clone PDAL and GeoWave.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ git clone git@github.com:PDAL/PDAL.git
$ git clone git@github.com:ngageoint/geowave.git</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="step-2-build-geowave"><a class="anchor" href="#step-2-build-geowave"></a>Step 2 - Build GeoWave</h4>
<div class="paragraph">
<p>In order to generate the Jace bindings for PDAL, we need to build GeoWave using Maven.</p>
</div>
<div class="paragraph">
<p>We will also specify two Maven profiles; one which specifies our target platform, and another to specify that we
are building PDAL Jace proxies.</p>
</div>
<div class="paragraph">
<p>Additionally, we need specify the path to the PDAL project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd geowave
$ mvn clean package -pl geowave-deploy -am -P generate-pdal-proxies,linux-amd64-gcc-debug -Dpdal.directory=/path/to/PDAL -Dmaven.test.skip=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the table below to select the platform most applicable to your needs.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Profile</th>
<th class="tableblock halign-left valign-top">Generator</th>
<th class="tableblock halign-left valign-top">Config</th>
<th class="tableblock halign-left valign-top">Architecture</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">windows-amd64-vc11-debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visual Studio 11 Win64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug-x64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">windows-amd64-vc11-release</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visual Studio 11 Win64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Release-x64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux-amd64-vc11-debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unix Makefiles</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux-amd64-vc11-release</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unix Makefiles</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="step-3-configure-cmake-for-pdal"><a class="anchor" href="#step-3-configure-cmake-for-pdal"></a>Step 3 - Configure cmake for PDAL</h4>
<div class="paragraph">
<p>Once Maven has finished, you will have generated all of the required artifacts for running GeoWave as a PDAL plugin.  The artifacts can be found in the target folder within geowave-deploy.</p>
</div>
<div class="paragraph">
<p>Now that the GeoWave plugin artifacts have been generated, we need to use cmake to configure PDAL to build with our plugin.</p>
</div>
<div class="paragraph">
<p>To configure PDAL to run with GeoWave, there are a few cmake options which need to be configured.  While some of the options (namely the JAVA options) may configure automatically, some will need to be set manually.  Refer to the table below to get an idea for how these options would be configured using GeoWave v0.8.3 on Ubuntu 14.04 LTS.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Automatically Configured?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BUILD_PLUGIN_GEOWAVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ON</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOWAVE_RUNTIME_JAR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/path/to/geowave/geowave-deploy/target/geowave-deploy-0.8.3-jace.jar</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JACE_INCLUDE_DIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/path/to/geowave/geowave-deploy/target/dependency/jace/include</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JACE_LIBRARY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/path/to/geowave/geowave-deploy/target/dependency/jace/libjace.so</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JACE_RUNTIME_JAR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/path/to/geowave/geowave-deploy/target/dependency/jace-core-runtime-1.2.22.jar</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_AWT_INCLUDE_PATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/java/jdk1.7.0_21/include</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_AWT_LIBRARY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/java/jdk1.7.0_21/jre/lib/amd64/libjawt.so</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_INCLUDE_PATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/java/jdk1.7.0_21/include</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_INCLUDE_PATH2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/java/jdk1.7.0_21/include/linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_JVM_LIBRARY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/java/jdk1.7.0_21/jre/lib/amd64/server/libjvm.so</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="step-4-build-pdal"><a class="anchor" href="#step-4-build-pdal"></a>Step 4 - Build PDAL</h4>
<div class="paragraph">
<p>Once cmake is configured, you can proceed with your normal PDAL build process.</p>
</div>
<div class="paragraph">
<p>Last, but not least, you should ensure that the libraries specified above are available either via PATH or LD_LIBRARY_PATH.</p>
</div>
<div class="paragraph">
<p>Within the PDAL documentation, you can see examples of how GeoWave can be used as both a
<a href="http://www.pdal.io/stages/readers.geowave.html">reader</a> and <a href="http://www.pdal.io/stages/writers.geowave.html">writer</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="documentation-2"><a class="anchor" href="#documentation-2"></a>Documentation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-6"><a class="anchor" href="#overview-6"></a>Overview</h3>
<div class="paragraph">
<p>The documentation is writen in <a href="http://en.wikipedia.org/wiki/AsciiDoc" target="_blank">AsciiDoc</a> which is a plain-text markup format that
can be created using any text editor and read “as-is”, or rendered to several other formats like HTML, PDF or EPUB.</p>
</div>
<div class="paragraph">
<p>Helpful Links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://asciidoctor.org/docs/what-is-asciidoc/" target="_blank">What is Asciidoc?</a></p>
</li>
<li>
<p><a href="http://asciidoctor.org/docs/asciidoc-writers-guide/" target="_blank">Writer&#8217;s Guide</a></p>
</li>
<li>
<p><a href="http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/" target="_blank">AsciiDoc Syntax Reference</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ordering"><a class="anchor" href="#ordering"></a>Ordering</h3>
<div class="paragraph">
<p>All of the content stored in the <code>docs/content</code> directory of this project will be rendered into a single web page with
an auto-generated table of contents and a PDF. The order in which the pages appear is determined by the sort order of
the file names given to the ASCIIDOC files in the <code>docs/content</code> directory so a numeric prefix has been given to each
file. Gaps can be left in between the numbers (only the sort order is important) to allow for future edits without having
to renumber other documents that will appear after the new content.</p>
</div>
</div>
<div class="sect2">
<h3 id="preview"><a class="anchor" href="#preview"></a>Preview</h3>
<div class="paragraph">
<p>To preview markup as HTML before making a commit there are plugins available various text editors and IDEs that
can be used while editing. If your preferred text editor has no plugin available there&#8217;s a
<a href="https://github.com/asciidoctor/asciidoctor-firefox-addon" target="_blank">Firefox AsciiDoc Plugin</a> available which allows for previewing
with a quick refresh of the browser.</p>
</div>
</div>
<div class="sect2">
<h3 id="transformation"><a class="anchor" href="#transformation"></a>Transformation</h3>
<div class="paragraph">
<p>To preview the entire finished page web page or see the generated PDF you&#8217;ll need to run the transformation process.</p>
</div>
<div class="listingblock">
<div class="title">Generate Documentation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash"> cd geowave
 mvn -P docs -pl docs install <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>-pl docs = Process <em>only</em> the docs module. Skips the javadoc generation step.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The source documents will be transformed and will be available for inspection in the <code>geowave/target/site/</code> directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="site"><a class="anchor" href="#site"></a>Site</h3>
<div class="paragraph">
<p>To build all the content used for the <a href="https://ngageoint.github.io/geowave/">GeoWave website</a> use the following command. The
entire site, including both docs and javadocs, will be available for inspection in the <code>geowave/target/site/</code> directory.</p>
</div>
<div class="paragraph">
<p>+[source, bash]
+.Generate Website
+----
+ cd geowave
+ mvn -P docs install
+----</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="puppet-2"><a class="anchor" href="#puppet-2"></a>Puppet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-7"><a class="anchor" href="#overview-7"></a>Overview</h3>
<div class="paragraph">
<p>A GeoWave <a href="http://puppetlabs.com/" target="_blank">Puppet module</a> has been provided as part of both the tar.gz archive bundle and as an
RPM. This module can be used to install the various GeoWave services onto separate nodes in a cluster or all onto a single
node for development.</p>
</div>
<div class="paragraph">
<p>There are a couple of different RPM repo settings that may need setting. As the repo is disabled by default to avoid picking
up new Accumulo iterator jars without coordinating a service restart you&#8217;ll have to enable and then disable in consecutive
Puppet runs to do the initial install.</p>
</div>
</div>
<div class="sect2">
<h3 id="options"><a class="anchor" href="#options"></a>Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">hadoop_vendor_version</dt>
<dd>
<p>The Hadoop framework vendor and version against which GeoWave was built. Currently only cdh5 is supported</p>
</dd>
<dt class="hdlist1">install_accumulo</dt>
<dd>
<p>Install the GeoWave Accumulo Iterator on this node and upload it into HDFS. This node must have a working HDFS client.</p>
</dd>
<dt class="hdlist1">install_app</dt>
<dd>
<p>Install the GeoWave ingest utility on this node. This node must have a working HDFS client.</p>
</dd>
<dt class="hdlist1">install_app_server</dt>
<dd>
<p>Install Jetty with Geoserver and GeoWave plugin on this node.</p>
</dd>
<dt class="hdlist1">http_port</dt>
<dd>
<p>The port on which the Jetty application server will run, defaults to 8080.</p>
</dd>
<dt class="hdlist1">repo_base_url</dt>
<dd>
<p>Used with the optional geowave::repo class to point the local package management system at a source for GeoWave RPMs.
The default location is <a href="http://s3.amazonaws.com/geowave-rpms/dev/noarch/" class="bare">http://s3.amazonaws.com/geowave-rpms/dev/noarch/</a></p>
</dd>
<dt class="hdlist1">repo_enabled</dt>
<dd>
<p>To pick up an updated Accumulo iterator you&#8217;ll need to restart the Accumulo service. As we don&#8217;t want to pick up new
RPMs with something like a yum-cron job without coordinating a restart so the repo is disabled by default.</p>
</dd>
<dt class="hdlist1">repo_refresh_md</dt>
<dd>
<p>The number of seconds before checking for new RPMs. On a production system the default of every 6 hours should be sufficient
but you can lower this down to 0 for a development system on which you wish to pick up new packages as soon as they are
made available.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="examples-2"><a class="anchor" href="#examples-2"></a>Examples</h3>
<div class="sect3">
<h4 id="development"><a class="anchor" href="#development"></a>Development</h4>
<div class="paragraph">
<p>Install everything on a one node development system, use the GeoWave Development RPM Repo and force a check for new RPMs
with every pull (don&#8217;t use cached metadata)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ruby" data-lang="ruby"># Dev VM
class { 'geowave::repo':
  repo_enabled    =&gt; 1,
  repo_refresh_md =&gt; 0,
} -&gt;
class { 'geowave':
  hadoop_vendor_version =&gt; 'cdh5',
  install_accumulo      =&gt; true,
  install_app           =&gt; true,
  install_app_server    =&gt; true,
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clustered"><a class="anchor" href="#clustered"></a>Clustered</h3>
<div class="paragraph">
<p>Run the application server on a different node, use a locally maintained rpm repo vs. the one available on the Internet and
run the app server on an alternate port so as not to conflict with another service running on that host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ruby" data-lang="ruby"># Master Node
node 'c1-master' {
  class { 'geowave::repo':
    repo_base_url   =&gt; 'http://my-local-rpm-repo/geowave-rpms/dev/noarch/',
    repo_enabled    =&gt; 1,
  } -&gt;
  class { 'geowave':
    hadoop_vendor_version =&gt; 'cdh5',
    install_accumulo      =&gt; true,
    install_app           =&gt; true,
  }
}

# App server node
node 'c1-app-01' {
  class { 'geowave::repo':
    repo_base_url   =&gt; 'http://my-local-rpm-repo/geowave-rpms/dev/noarch/',
    repo_enabled    =&gt; 1,
  } -&gt;
  class { 'geowave':
    hadoop_vendor_version =&gt; 'cdh5',
    install_app_server    =&gt; true,
    http_port             =&gt; '8888',
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="puppet-script-management"><a class="anchor" href="#puppet-script-management"></a>Puppet script management</h3>
<div class="paragraph">
<p>As mentioned in the overview the scripts are available from within the <a href="http://s3.amazonaws.com/geowave-rpms/index.html" target="_blank">GeoWave source tar bundle</a>
(Search for gz to filter the list) or you could use the RPM package to install and pick up future updates on your puppet server.</p>
</div>
<div class="sect3">
<h4 id="source-archive"><a class="anchor" href="#source-archive"></a>Source Archive</h4>
<div class="paragraph">
<p>Unzip the source archive, locate puppet-scripts.tar.gz and manage the scripts yourself on your Puppet Server</p>
</div>
</div>
<div class="sect3">
<h4 id="rpm"><a class="anchor" href="#rpm"></a>RPM</h4>
<div class="paragraph">
<p>There&#8217;s a bit of a boostrap issue when first configuring the Puppet server to use the geowave puppet RPM as yum won&#8217;t know
about the rpm repo and the GeoWave Repo Puppet class hasn&#8217;t been installed yet. There is an RPM available that will set
up the yum repo config after which you should install geowave-cdh-puppet manually and proceed to configure GeoWave on the
rest of the cluster using Puppet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">rpm -Uvh http://s3.amazonaws.com/geowave-rpms/release/noarch/geowave-repo-1.0-3.noarch.rpm
yum install geowave-cdh5-puppet</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendices-2"><a class="anchor" href="#appendices-2"></a>Appendices</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="version"><a class="anchor" href="#version"></a>Version</h3>
<div class="paragraph">
<p>This documentation was generated for GeoWave version 0.8.4-SNAPSHOT from commit 35410074ce6f349e1eb78e72233e412f1f457a87.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="topics-in-need-of-documentation"><a class="anchor" href="#topics-in-need-of-documentation"></a>Topics in need of documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ingest Examples</p>
</li>
<li>
<p>Query Iterators</p>
</li>
<li>
<p>Query CQL</p>
</li>
<li>
<p>MapReduce Input Format</p>
</li>
<li>
<p>Analytics - Kernel Density</p>
</li>
<li>
<p>Analytics - K-Means Clustering</p>
</li>
<li>
<p>Examples - Shapefile</p>
</li>
<li>
<p>Examples - OSM GPX Data</p>
</li>
<li>
<p>Examples - OSM Feature Data</p>
</li>
<li>
<p>Index Tuning</p>
</li>
<li>
<p>Supported Types</p>
</li>
<li>
<p>Editing from GitHub</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-03-28 02:14:19 UTC
</div>
</div>
</body>
</html>